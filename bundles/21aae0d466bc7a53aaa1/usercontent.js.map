{"version":3,"file":"bundles/21aae0d466bc7a53aaa1/usercontent.js","mappings":"MAQA,IAAIA,GAAY,EAmDhBC,OAAOC,UAAY,SAAUC,GACrBA,EAAEC,SAAWH,OAAOI,SAASD,QACzBD,EAAEG,KAAKC,MApDnB,SAAsBC,GAClB,MAAMF,EAAOE,EAAMF,KAGfN,GACAS,SAASC,KAAKC,YAAYF,SAASG,cAAc,SAErDZ,GAAY,EAEZ,MAAMa,EAAuBJ,SAASG,cAAc,QACpDC,EAAIC,GAAK,MAET,MAAMC,EAAuBN,SAASG,cAAc,KACpDG,EAAED,GAAK,IACPC,EAAEC,IAAM,sBACRD,EAAEE,SAAWX,EAAKW,SAElBF,EAAEG,MAAQZ,EAAKY,MACfH,EAAEG,MAAMC,WAAa,+BACrBJ,EAAEK,KAAOnB,OAAOoB,IAAIC,gBAAgBhB,EAAKC,MACzCQ,EAAEQ,YAAYV,GACdE,EAAEQ,YAAYd,SAASe,eAAelB,EAAKmB,cAIvCnB,EAAKoB,SAELb,EAAIK,MAAQZ,EAAKoB,UAEjBb,EAAIK,MAAMS,MAAQ,OAClBd,EAAIK,MAAMU,OAAS,OACnBf,EAAIK,MAAMW,eAAiB,OAC3BhB,EAAIK,MAAMY,mBAAqB,SAC/BjB,EAAIK,MAAMa,iBAAmB,YAC7BlB,EAAIK,MAAMc,QAAU,eACpBnB,EAAIK,MAAMe,gBAAkB,QAAQ3B,EAAK4B,WACzCrB,EAAIK,MAAMiB,gBAAkB,GAAGpB,EAAEG,MAAMkB,SAG3C,MAAM1B,EAAOD,SAASC,KAEtBA,EAAKQ,MAAMmB,OAAS,MACpB3B,EAAKQ,MAAMoB,SAAW,SACtB5B,EAAKa,YAAYR,GAEbP,EAAMF,KAAKiC,MACXxB,EAAEyB,OAEV,CAIyBC,CAAatC,EAEtC,C","sources":["webpack://element-web/./src/usercontent/index.ts"],"sourcesContent":["/*\nCopyright 2024 New Vector Ltd.\nCopyright 2022 The Matrix.org Foundation C.I.C.\n\nSPDX-License-Identifier: AGPL-3.0-only OR GPL-3.0-only\nPlease see LICENSE files in the repository root for full details.\n*/\n\nlet hasCalled = false;\nfunction remoteRender(event: MessageEvent): void {\n    const data = event.data;\n\n    // If we're handling secondary calls, start from scratch\n    if (hasCalled) {\n        document.body.replaceWith(document.createElement(\"BODY\"));\n    }\n    hasCalled = true;\n\n    const img: HTMLSpanElement = document.createElement(\"span\"); // we'll mask it as an image\n    img.id = \"img\";\n\n    const a: HTMLAnchorElement = document.createElement(\"a\");\n    a.id = \"a\";\n    a.rel = \"noreferrer noopener\";\n    a.download = data.download;\n    // @ts-ignore\n    a.style = data.style;\n    a.style.fontFamily = \"Arial, Helvetica, Sans-Serif\";\n    a.href = window.URL.createObjectURL(data.blob);\n    a.appendChild(img);\n    a.appendChild(document.createTextNode(data.textContent));\n\n    // Apply image style after so we can steal the anchor's colour.\n    // Style copied from a rendered version of mx_MFileBody_download_icon\n    if (data.imgStyle) {\n        // @ts-ignore\n        img.style = data.imgStyle;\n    } else {\n        img.style.width = \"20px\";\n        img.style.height = \"20px\";\n        img.style.webkitMaskSize = \"20px\";\n        img.style.webkitMaskPosition = \"center\";\n        img.style.webkitMaskRepeat = \"no-repeat\";\n        img.style.display = \"inline-block\";\n        img.style.webkitMaskImage = `url('${data.imgSrc}')`;\n        img.style.backgroundColor = `${a.style.color}`;\n    }\n\n    const body = document.body;\n    // Don't display scrollbars if the link takes more than one line to display.\n    body.style.margin = \"0px\";\n    body.style.overflow = \"hidden\";\n    body.appendChild(a);\n\n    if (event.data.auto) {\n        a.click(); // try to trigger download automatically\n    }\n}\n\nwindow.onmessage = function (e: MessageEvent): void {\n    if (e.origin === window.location.origin) {\n        if (e.data.blob) remoteRender(e);\n    }\n};\n"],"names":["hasCalled","window","onmessage","e","origin","location","data","blob","event","document","body","replaceWith","createElement","img","id","a","rel","download","style","fontFamily","href","URL","createObjectURL","appendChild","createTextNode","textContent","imgStyle","width","height","webkitMaskSize","webkitMaskPosition","webkitMaskRepeat","display","webkitMaskImage","imgSrc","backgroundColor","color","margin","overflow","auto","click","remoteRender"],"sourceRoot":""}